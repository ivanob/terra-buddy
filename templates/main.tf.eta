terraform {
  required_version = ">= 1.3"

  backend "s3" { # This is the configuration to use a remote-state instead of a local one. So we dont rely on terraform.tfstate.d
    bucket         = "<%= it.project_codename %>-tfstate-bucket"
    key            = "staging/terraform.tfstate"
    region         = "<%= it.region %>"
    encrypt        = true
    dynamodb_table = "<%= it.project_codename %>-fstate-locks" 
  }
}

locals {
  env = terraform.workspace  # Will be "dev" or "prod"
}